{"ast":null,"code":"var _jsxFileName = \"/home/giovanne/viagemapp/frontend/src/pages/PerfilAgencia/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom'; //npm install react-router-dom\n\nimport { FiPower, FiTrash2 } from 'react-icons/fi'; //npm install react-icons\n\nimport './styles.css';\nimport api from '../../services/api';\nimport logoImg from '../../assets/logo.png';\nexport default function PerfilAgencia() {\n  //Inicia-se com um vetor vazio como total de viagens do usuario.\n  const [viagens, setViagens] = useState([]); //Pega os dados anteriormente armazenados no localStorage.\n\n  const idUsuario = localStorage.getItem('idUsuario');\n  const nomeUsuario = localStorage.getItem('nomeUsuario');\n  const history = useHistory();\n  useEffect(() => {\n    api.get(`/agencias/${idUsuario}`).then(response => {\n      setViagens(response.data.viagens);\n    });\n  }, [idUsuario]);\n\n  async function handleDeleteViagem(id) {\n    try {\n      await api.delete(`/viagens/${id}`);\n      /*Filtra a lista de incidents mantendo apenas aqueles\n      com id diferente do com id deletado*/\n\n      setViagens(viagens.filter(viagem => viagem.id !== id));\n    } catch (Err) {\n      alert('Erro ao deletar viagem.');\n    }\n  } //Função responsáel por limpar o localStorage ao deslogar.\n\n\n  function handleLogout() {\n    //Limpa o localStorage\n    localStorage.clear(); //Redireciona a home\n\n    history.push('/loginAgencia');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-perfil-agencia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoImg,\n    alt: \"Logo ViagemApp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, \"Bem-vindo(a), \", nomeUsuario, \"!\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleLogout,\n    type: \"button\",\n    className: \"power\",\n    style: {\n      borderStyle: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiPower, {\n    size: 50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-viagens-agencia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"button-cadastro-viagem\",\n    to: \"cadastroViagem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Cadastrar viagem\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, \"Minhas viagens\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lista-viagens\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, viagens.map(viagem => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 29\n    }\n  }, \"Local de partida\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }, viagem.localPartida), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 29\n    }\n  }, \"Local de chegada\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, viagem.localChegada), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Hor\\xE1rio de partida\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 29\n    }\n  }, viagem.horarioPartida), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, \"Hor\\xE1rio de chegada\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }, viagem.horarioChegada), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, \"Pre\\xE7o\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, Intl.NumberFormat('pt-BR', {\n    style: 'currency',\n    currency: 'BRL'\n  }).format(viagem.preco)), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Capacidade\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }, viagem.capacidade), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDeleteViagem(viagem.id),\n    type: \"button\",\n    className: \"trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FiTrash2, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 33\n    }\n  }))))))));\n}","map":{"version":3,"sources":["/home/giovanne/viagemapp/frontend/src/pages/PerfilAgencia/index.js"],"names":["React","useState","useEffect","Link","useHistory","FiPower","FiTrash2","api","logoImg","PerfilAgencia","viagens","setViagens","idUsuario","localStorage","getItem","nomeUsuario","history","get","then","response","data","handleDeleteViagem","id","delete","filter","viagem","Err","alert","handleLogout","clear","push","borderStyle","map","localPartida","localChegada","horarioPartida","horarioChegada","Intl","NumberFormat","style","currency","format","preco","capacidade"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';    //npm install react-router-dom\nimport { FiPower, FiTrash2 } from 'react-icons/fi'      //npm install react-icons\nimport './styles.css';\n\nimport api from '../../services/api';\nimport logoImg from '../../assets/logo.png';\n\nexport default function PerfilAgencia(){\n    //Inicia-se com um vetor vazio como total de viagens do usuario.\n    const [viagens, setViagens] = useState([])\n    \n    //Pega os dados anteriormente armazenados no localStorage.\n    const idUsuario = localStorage.getItem('idUsuario');\n    const nomeUsuario = localStorage.getItem('nomeUsuario');\n\n    const history = useHistory();\n\n    useEffect(() => {\n        api.get(`/agencias/${idUsuario}`).then(response => {\n            setViagens(response.data.viagens);\n        })\n    }, [idUsuario]);\n\n    async function handleDeleteViagem(id){\n        try{\n            await api.delete(`/viagens/${id}`);\n            /*Filtra a lista de incidents mantendo apenas aqueles\n            com id diferente do com id deletado*/\n            setViagens(viagens.filter(viagem => viagem.id !== id));\n        }catch(Err){\n            alert('Erro ao deletar viagem.');\n        }\n    }\n\n    //Função responsáel por limpar o localStorage ao deslogar.\n    function handleLogout(){\n        //Limpa o localStorage\n        localStorage.clear();\n        //Redireciona a home\n        history.push('/loginAgencia');\n    }\n\n    return (\n        <div className=\"container-perfil-agencia\">\n            <header>\n                <img src={logoImg} alt=\"Logo ViagemApp\"/>\n                <span>Bem-vindo(a), {nomeUsuario}!</span>\n                <button onClick={handleLogout} type='button' className=\"power\" style={{ borderStyle:'none' }}>\n                    <FiPower size={50} />\n                </button>\n            </header>\n            <div className='container-viagens-agencia'>\n                <Link className='button-cadastro-viagem' to='cadastroViagem'>Cadastrar viagem</Link>\n                <h1>Minhas viagens</h1>\n                <div className=\"lista-viagens\">\n                    <ul>\n                        {viagens.map(viagem => (\n                        <li>\n                            <strong>Local de partida</strong>\n                            <p>{viagem.localPartida}</p>\n                            <strong>Local de chegada</strong>\n                            <p>{viagem.localChegada}</p>\n                            <strong>Horário de partida</strong>\n                            <p>{viagem.horarioPartida}</p>\n                            <strong>Horário de chegada</strong>\n                            <p>{viagem.horarioChegada}</p>\n                            <strong>Preço</strong>\n                            <p>{Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(viagem.preco)}</p>\n                            <strong>Capacidade</strong>\n                            <p>{viagem.capacidade}</p>\n\n                            <button \n                                onClick={() => handleDeleteViagem(viagem.id)}\n                                type='button' \n                                className='trash' \n                            >\n                                <FiTrash2 />\n                            </button>\n                        </li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n        </div>\n    );\n} "]},"metadata":{},"sourceType":"module"}